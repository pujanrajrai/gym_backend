{% extends 'form_base.html' %}
{% load static %}
{% block title %}Create Customer{% endblock %}
{% block pagetitle %}Create Customer{% endblock %}
{% block addbutton %}
{% endblock %}
{% block body %}

<form method="post" onsubmit="myFunction()" enctype="multipart/form-data">
  {% csrf_token %}
  {{ phone_number }}
  {% for field in form %}
  <div class="form-group col-md-6">
      {{ field.label_tag }} 
      {%if field.label_tag == '<label for="id_password">Password:</label>' %}
      <label for="copy_password">
        <input type="checkbox" id="copy_password" checked>
        Copy Phone Number
      </label>
      {%endif%}
       {{ field }} 
      {{ field.errors }}
      {% if field.help_text %}
          <p class="help">{{ field.help_text|safe }}</p>
      {% endif %}
  </div>
{% endfor %}
  </div>
  <button type="submit" class="btn btn-sm btn-primary"><i class="fa fa-plus"></i>&nbsp;Create Customer</button>
</form>

<script>
    document.addEventListener("DOMContentLoaded", function() {
      // Function to copy phone number to password field
      function copyPhoneNumberToPassword() {
        const phoneNumber = document.querySelector('input[name="phone_number"]').value;
        document.querySelector('input[name="password"]').value = phoneNumber;
      }
    
      // Copy phone number to password field on page load
      copyPhoneNumberToPassword();
    
      // When the checkbox is clicked, copy phone number to password field
      document.getElementById('copy_password').addEventListener('click', function() {
        if (this.checked) {
          copyPhoneNumberToPassword();
        } else {
          document.querySelector('input[name="password"]').value = '';
        }
      });
    });
    </script>

{% endblock %}
